{% load sekizai_tags %}
{% load jsonify %}
{% addtoblock "js" %}<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/jquery/jquery-ui-1.10.0.custom.min.js"></script>{% endaddtoblock %}	

{% addtoblock "css" %}<link type="text/css" rel="stylesheet" href="{{STATIC_URL}}css/base.css"/>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/css_browser_selector.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/jquery/jquery.lazyloadxt.extra.min.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/jquery/jquery.fitvids.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/processing.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/froogaloop.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/lib/jquery/jquery-plus.js"></script>{% endaddtoblock %}
<div id="gallery">
	{% for m, medium in media.items %}
		<div id="medium-{{m}}" class="medium">
			{% for project in medium %}
				{% with project.code|add:".html" as template %}
					<ul code="{{project.code}}" class="project col-{{project.medium}} row-{{project.order}}"> 
							{% include template %}
					</ul>
				{% endwith %}
			{% endfor %}		
		</div>
	{% endfor %}
</div>

{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/utils.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/jquery.players.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/jquery.nav.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/jquery.project.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{STATIC_URL}}js/control.js"></script>{% endaddtoblock %}

<!--[if IE]>
	<div id="windows" class="alert">Best viewed in Chrome, Firefox or Safari.</div>
<![endif]-->
<!--[if !IE]> -->
	<div class="alert"><span>&deg;</span> Turn on your sound and wait for things to happen.<span>&deg;</span> </div>
	<script type="text/javascript">
		$(".alert").delay(20000).slideUp("slow");
		$(window).load(function(){
			setTimeout(function(){
				Processing.logger = console;
				var media = {{media.items | jsonify }};
				gallery.control.init(media);
				$("#gallery, #nav-wrapper").fadeTo(2500, 1, function(){
					$("#nav").fadeTo(5000, 1, function(){
						if(window.location.hash != "#about") {
							setTimeout(function(){
								$("#nav").fadeTo(2500, 0)
							}, 5000)
						}
					});
				});
			}, 1000);
		});

		var getWindowSize = function () {
			return { w : $(window).width(), h: $(window).height() };
		}

		var o = getWindowSize();
		$(window).resize(function(){
			var n = getWindowSize();
			$("canvas").width(n.w).height(n.h);
		});

		</script>
<!-- <![endif]-->
